const downloadPdf = async (link: string) => {
  try {
    // Fetch the PDF from the link
    const response = await fetch(link, {
      headers: {
        Authorization: `${process.env.REACT_APP_RTOB_AUTHORIZATION}`,
      },
    });

    // Check if the response is successful
    if (!response.ok) {
      throw new Error(`Failed to fetch PDF: ${response.statusText}`);
    }

    // Convert the response to a Blob
    const blob = await response.blob();

    // Create a link element
    const lin = document.createElement('a');
    const dataURL = window.URL.createObjectURL(blob);
    lin.href = dataURL;

    // Set the download file name
    lin.download = pdfName.endsWith('.pdf') ? pdfName : `${pdfName}.pdf`;

    // Append the link to the DOM, trigger the click, and remove the link
    document.body.appendChild(lin);
    lin.click();
    document.body.removeChild(lin);

    // Revoke the object URL to free memory
    window.URL.revokeObjectURL(dataURL);
  } catch (error) {
    console.error('Error downloading PDF:', error);
  }
};
